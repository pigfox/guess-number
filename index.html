<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guess A Number</title>
<link rel="icon" href="/favicon.ico">
<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script>
<script src="./js/index.js" ></script>
<link rel="stylesheet" href="./css/styles.css"/>
</head>
<body>
<div class="content">
  <img src="./img/logo.png" alt="Logo" id="logo"/> 
  <h3>Guess a number on Sepolia</h3>
  <div><button id="connectMetamaskBtn" class="btn shape">Connect Metamask</button></div>
  <div id="accountArea"></div>
  <div><button id="connectContractBtn" class="btn shape">Connect Contract</button></div>
  <div id="contractArea"></div>
  <div><button onclick="newGame()" class="btn shape">New Game</button></div>
  <div><button onclick="setMaxNumber()" class="btn shape">Set Max Number</button></div>
  <div class="txt">Max number</div>
  <div><input type="input" id="maxNumber" class="shape" /></div>
  <div class="small">A demo by <a href="https://pigfox.com" target="_blank">Pigfox</a></div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>
  <script>
    const connectMetamaskBtn = document.getElementById('connectMetamaskBtn');

    connectMetamaskBtn.addEventListener('click', () => {
        if (typeof window.ethereum !== 'undefined') {
            console.log('MetaMask is installed!');

            // Request account access
            window.ethereum.request({ method: 'eth_requestAccounts' })
                .then(accounts => {
                    // Account access granted
                    console.log('Connected', accounts[0]);
                    connectMetamaskBtn.textContent = 'Connected';
                })
                .catch(err => {
                    // User denied account access
                    console.error('User denied account access', err);
                });
        } else {
            console.log('MetaMask is not installed. Please consider installing it.');
            connectMetamaskBtn.textContent = 'Please install MetaMask';
        }
    });
  </script>
    <script>
  /*
  window.addEventListener('load', async () => {
    if (typeof ethereum === 'undefined') {
      console.log('ethereum undefined.');
      return;
  }
  let account;
  const connectMetamask = async () => {
          const accounts = await ethereum.request({ method: "eth_requestAccounts"});
          account = accounts[0];
          document.getElementById("accountArea").innerHTML = account;
  }

  let contract;
  const connectContract = async () => {
    const address = "0x2b328Aa1e7b95Ca0db3A1509b56c8f0bf5d039b8";
    const ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"actualNumber","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMaxNumber","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getWins","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_guessedNumber","type":"uint256"}],"name":"guess","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"newGame","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxNumber","type":"uint256"}],"name":"setMaxNumber","outputs":[],"stateMutability":"nonpayable","type":"function"}];
    const provider = new ethers.providers.Web3Provider(window.etereum);//@10:48
    const signer = provider.getSigner();
    contract = new ethers.Contract(address, ABI, signer);
    document.getElementById("contractArea").innerHTML = contract.address;
  }

  const readContract = async () => {
      const data = await contractApple.getMaxNumber();
      document.getElementById("readArea").innerHTML = myData;
  }
  });
  */
</script>
</body>
</html>